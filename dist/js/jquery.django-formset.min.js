/*
 *  jQuery Django Formset - v1.0.1
 *  A simple and light javascript formset handler for django.
 *  
 *
 *  Made by Harley Jessop
 *  Under MIT License
 */
!function(a){function b(b,e){this.element=b,this.options=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="multiFormset",d={formset:".formset",formsetRow:".formset-row",addRowBtn:".js--add-formset-row",delRowBtn:".js--del-formset-row",prefix:null};b.prototype={init:function(){var b=this,c=this.element,d=a(c).find(b.options.formsetRow),e=b.options.prefix||a(c).data("prefix");a(c).on("click",b.options.addRowBtn,function(){b.addRow(c,d,e)}),a(c).on("click",b.options.delRowBtn,function(){b.delRow(this,c,d,e)})},addRow:function(b,c,d){var e=parseInt(a("#id_"+d+"-TOTAL_FORMS").val(),10),f=c.first().clone(),g=f.data("counter");a(f).find("input, select").each(function(){a(this).val("").attr({name:a(this).attr("name").replace(g,e),id:a(this).attr("id").replace(g,e)})}),a(f).data("counter",e).attr({id:d+"_"+e,"data-counter":e}),a("#id_"+d+"-TOTAL_FORMS").attr("value",e+1),a(b).find(this.options.formsetRow).last().after(f),a(f).show()},delRow:function(b,c,d,e){var f=a(b).parents(this.options.formsetRow),g=a(f).data("counter");a(f).find("#id_"+e+"-"+g+"-DELETE").attr("checked","checked"),a(c).prepend("<input type='hidden' name='"+e+"-"+g+"-DELETE' value='on' />"),a(f).hide(),a(this.options.formsetRow+":visible").length||this.addRow(c,d,e,f)}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);